<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name= "viewport" content="width=device-width" initial scale="1.0">
    <title>InventoryMaster Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
        <script src="supabaseClient.js"></script>
        <script src="tableRender.js"></script>
        <script src="addEdit.js"></script>
</head>
<body>
    <div class="sidebar">
        <a href="index.html"><img src="C:\Users\shshi\OneDrive\Desktop\UoC\FinalYearProject\imgs\logo.png" class="logo" alt="InventoryMaster logo"></a>
        <ul>
            <li>
                <a href="index.html">
                    <span class="sidebar-icon">
                    <!-- Home SVG icon -->
                    <svg width="17" height="auto" fill="none" viewBox="0 0 24 24"><path stroke="#232323" stroke-width="2" d="M3 10L12 3l9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V10z"/></svg>
                    </span>
                    Home
                </a>
            </li>
        <li>
            <div class="select-row">
                <span class="sidebar-icon">
                    <!-- Bar chart SVG for Inventory Table Selector -->
                    <svg width="20" height="auto" fill="none" viewBox="0 0 24 19"><rect x="5" y="11" width="4" height="7" rx="2" stroke="#232323" stroke-width="2"/><rect x="10" y="7" width="4" height="11" rx="2" stroke="#232323" stroke-width="2"/><rect x="15" y="4" width="4" height="14" rx="2" stroke="#232323" stroke-width="2"/></svg>
                </span>
                <label for="table-select" class="select-label">Select table</label>
                <select id="table-select" title="Select table">
                    <option value="products">Products</option>
                    <option value="suppliers">Suppliers</option>
                    <option value="transactions">Transactions</option>
                    <option value="users">Users</option>
                </select>
            </div>
        </li>
        <li>
            <a href="reports.html">
                <span class="sidebar-icon">
                    <svg width="17" height="auto" fill="none" viewBox="0 0 24 22"><rect x="5" y="3" width="14" height="18" rx="2" stroke="#232323" stroke-width="2"/><path stroke="#232323" stroke-width="2" d="M9 7h6M9 11h6M9 15h6"/></svg>
                </span>
            Reports
            </a>
        </li>
        <li>
            <a href="settings.html">
                <span class="sidebar-icon">
                    <svg width="21" height="21" fill="none" viewBox="0 0 24 22">
                    <circle cx="12" cy="12" r="3" stroke="#232323" stroke-width="2"/>
                    <path stroke="#232323" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M19.4 15a1.73 1.73 0 000-3 1.73 1.73 0 00-1.45-.59l-1.2-2.07a1.7 1.7 0 00-1.38-.95c-.25-.08-.51-.13-.78-.13s-.53.05-.78.13a1.7 1.7 0 00-1.38.95l-1.2 2.07A1.73 1.73 0 004.6 15a1.73 1.73 0 000 3 1.73 1.73 0 001.45.59l1.2 2.07a1.7 1.7 0 001.38.95c.25.08.51.13.78.13s.53-.05.78-.13a1.7 1.7 0 001.38-.95l1.2-2.07A1.73 1.73 0 0019.4 18a1.73 1.73 0 000-3z"/>
                    </svg>
                </span>
            Settings
            </a>
            
        </li>
        </ul>
    </div>
    <div class="main-content">
        <div class="top-bar">
        <div class="top-bar-left">
            <input type="text" class="search-box" placeholder="Search Products">
        </div>
        <div class="top-bar-right">
            <span class="bell">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path stroke="#1976ed" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C6.67 6.165 6 7.388 6 8.75v5.408c0 .52-.214 1.019-.595 1.387L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
            </svg>
            </span>
            <img src="C:\Users\shshi\OneDrive\Desktop\UoC\FinalYearProject\imgs\useravatar.png" class="avatar" alt="User">
        </div>
        </div>
        <button class="add-btn">Add Product</button>
        <table id="products-table">
            <tbody id="products-tbody"></tbody>
        </table>
        <table id="suppliers-table">
            <tbody id="suppliers-tbody"></tbody>
        </table>
        <table id="transactions-table">
            <tbody id="transactions-tbody"></tbody>
        </table>
        <table id="users-table">
            <tbody id="users-tbody"></tbody>
        </table>
    </div>

    <div id="modal-backdrop" class="modal-backdrop" style="display: none;"></div>
    <div id="modal-dialog" class="modal-dialog" style="display: none;">
        <form id="modal-form">
            <h2 id="modal-title">Add Record</h2>
            <div id="modal-fields"></div>
            <div class="modal-actions">
                <button type="submit" class="modal-save">Save</button>
                <button type="button" onclick="closeModal()" class="modal-cancel">Cancel</button>
            </div>
        </form>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
        const tableSelect = document.getElementById("table-select");

            function updateTableVisibility(selected) {
                document.getElementById("products-table").style.display =
                selected === "products" ? "" : "none";
                document.getElementById("suppliers-table").style.display =
                selected === "suppliers" ? "" : "none";
                document.getElementById("transactions-table").style.display =
                selected === "transactions" ? "" : "none";
                document.getElementById("users-table").style.display =
                selected === "users" ? "" : "none";
        }

        async function renderSelectedTable(selected) {
            if (selected === "products") {
                await renderProductsTable();
            } else if (selected === "suppliers") {
                await renderSuppliersTable();
            } else if (selected === "transactions") {
                await renderTransactionsTable();
            } else if (selected === "users") {
                await renderUsersTable();
            }
        }

            // Initial state (assumes "products" is the first/default option)
            updateTableVisibility(tableSelect.value);
            renderSelectedTable(tableSelect.value);

            // When dropdown changes
            tableSelect.addEventListener("change", function () {
            updateTableVisibility(this.value);
            renderSelectedTable(this.value);
            });
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
        const tableSelect = document.getElementById('table-select');
  // Hide/show tables
        function updateTableVisibility(selected) {
            document.getElementById('products-table').style.display = (selected === 'products') ? '' : 'none';
            document.getElementById('suppliers-table').style.display = (selected === 'suppliers') ? '' : 'none';
            document.getElementById('transactions-table').style.display = (selected === 'transactions') ? '' : 'none';
            document.getElementById('users-table').style.display = (selected === 'users') ? '' : 'none';
    }
  // Initial display
        updateTableVisibility(tableSelect.value);
            if (tableSelect.value === 'products') renderProductsTable();
            else if (tableSelect.value === 'suppliers') renderSuppliersTable();
            else if (tableSelect.value === 'transactions') renderTransactionsTable();
            else if (tableSelect.value === 'users') renderUsersTable();
  // Dropdown handler
        tableSelect.addEventListener('change', function() {
        updateTableVisibility(this.value);
            if (this.value === 'products') renderProductsTable();
            else if (this.value === 'suppliers') renderSuppliersTable();
            else if (this.value === 'transactions') renderTransactionsTable();
            else if (this.value === 'users') renderUsersTable();
        });
    });

    </script>
</body>
</html>
